# ë°ì´í„° êµ¬ì¡° ë¬¸ì„œ

## 1. Firebase Firestore ë°ì´í„°ë² ì´ìŠ¤

### ì»¬ë ‰ì…˜: `calendars`

#### ë¬¸ì„œ êµ¬ì¡°
```javascript
// ë¬¸ì„œ ID: ìë™ ìƒì„±ëœ ê³ ìœ  ID (ì˜ˆ: "abc123xyz789")
{
  startDate: '2025-12-01',        // String: ìº˜ë¦°ë” ì‹œì‘ì¼ (ê³ ì •)
  endDate: '2025-12-31',          // String: ìº˜ë¦°ë” ì¢…ë£Œì¼ (ê³ ì •)
  createdAt: Date ê°ì²´,            // Timestamp: ìº˜ë¦°ë” ìƒì„± ì‹œê°„
  calendarName: 'ìš°ë¦¬ ê°€ì¡± ìº˜ë¦°ë”',  // String: ìº˜ë¦°ë” ì´ë¦„ (ì¤‘ë³µ ë¶ˆê°€)
  passwordHash: 'hashValue',       // String: í•´ì‹œëœ ë¹„ë°€ë²ˆí˜¸
  messages: {                      // Object: ë‚ ì§œë³„ ë©”ì‹œì§€ ë°°ì—´
    '2025-12-25': [                // String í‚¤: YYYY-MM-DD í˜•ì‹ ë‚ ì§œ
      {
        text: 'í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì¶•í•˜í•´! ğŸ„',  // String: ë©”ì‹œì§€ ë‚´ìš©
        createdAt: '2025-12-25T10:30:00.000Z'  // ISO String: ë©”ì‹œì§€ ì‘ì„± ì‹œê°„
      },
      {
        text: 'ì‚¬ë‘í•´! â¤ï¸',
        createdAt: '2025-12-25T15:20:00.000Z'
      }
    ],
    '2025-12-31': [
      {
        text: 'ìƒˆí•´ ë³µ ë§ì´ ë°›ìœ¼ì„¸ìš”! ğŸ‰',
        createdAt: '2025-12-31T00:00:00.000Z'
      }
    ]
  }
}
```

### ì˜ˆì‹œ ë°ì´í„°
```json
{
  "startDate": "2025-12-01",
  "endDate": "2025-12-31",
  "createdAt": "2025-12-15T08:00:00.000Z",
  "calendarName": "ìš°ë¦¬ ê°€ì¡± í¬ë¦¬ìŠ¤ë§ˆìŠ¤",
  "passwordHash": "hash123abc",
  "messages": {
    "2025-12-25": [
      {
        "text": "ì¦ê±°ìš´ í¬ë¦¬ìŠ¤ë§ˆìŠ¤!",
        "createdAt": "2025-12-25T09:00:00.000Z"
      },
      {
        "text": "ì‚°íƒ€ í• ì•„ë²„ì§€ ì™€ìš”!",
        "createdAt": "2025-12-25T10:00:00.000Z"
      }
    ]
  }
}
```

---

## 2. ë¸Œë¼ìš°ì € localStorage

### í‚¤: `advent_calendar_links`

ì‚¬ìš©ìê°€ ë§Œë“  ìº˜ë¦°ë” ëª©ë¡ì„ ì €ì¥ (ìºì‹±)

#### êµ¬ì¡°
```javascript
[
  {
    id: 'abc123xyz789',                    // String: Firebase ë¬¸ì„œ ID
    title: 'ìš°ë¦¬ ê°€ì¡± ìº˜ë¦°ë”',              // String: ìº˜ë¦°ë” ì´ë¦„
    createdAt: '2025-12-15T08:00:00.000Z'  // ISO String: ë¡œì»¬ ì €ì¥ ì‹œê°„
  },
  {
    id: 'def456uvw012',
    title: 'ì¹œêµ¬ë“¤ ìº˜ë¦°ë”',
    createdAt: '2025-12-20T10:00:00.000Z'
  }
]
```

**ìš©ë„**: í™ˆ í˜ì´ì§€ì—ì„œ ë‚´ ìº˜ë¦°ë” ëª©ë¡ ë¹ ë¥´ê²Œ í‘œì‹œ

---

## 3. ë°ì´í„° íë¦„

### 1ï¸âƒ£ ìº˜ë¦°ë” ìƒì„±
```
ì‚¬ìš©ì ì…ë ¥ 
  â†“ (Home.jsx)
ì´ë¦„: "ìš°ë¦¬ ê°€ì¡±"
ë¹„ë°€ë²ˆí˜¸: "1234"
  â†“
createCalendar("ìš°ë¦¬ ê°€ì¡±", "1234")
  â†“ (firestore.js)
Firebase Firestoreì— ì €ì¥
  â†“
ë¬¸ì„œ ID ë°˜í™˜: "abc123xyz789"
  â†“
localStorageì— ë§í¬ ì €ì¥
```

### 2ï¸âƒ£ ë©”ì‹œì§€ ì‘ì„±
```
ì‚¬ìš©ì ì…ë ¥ (Guest.jsx)
  â†“
ë‚ ì§œ: "2025-12-25"
ë©”ì‹œì§€: "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì¶•í•˜!"
  â†“
saveMessage(calendarId, "2025-12-25", "í¬ë¦¬ìŠ¤ë§ˆìŠ¤ ì¶•í•˜!")
  â†“ (firestore.js)
1. ê¸°ì¡´ ìº˜ë¦°ë” ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
2. messages["2025-12-25"] ë°°ì—´ì— ìƒˆ ë©”ì‹œì§€ ì¶”ê°€
3. Firebaseì— ì—…ë°ì´íŠ¸
```

### 3ï¸âƒ£ ìº˜ë¦°ë” ì¡°íšŒ
```
ì‚¬ìš©ìê°€ ë§í¬ í´ë¦­
  â†“
calendarId ì¶”ì¶œ
  â†“
getCalendar(calendarId)
  â†“ (firestore.js)
Firebaseì—ì„œ ë¬¸ì„œ ì¡°íšŒ
  â†“
ìº˜ë¦°ë” ë°ì´í„° ë°˜í™˜
  â†“
messagesë¥¼ ë‚ ì§œë³„ë¡œ í‘œì‹œ
```

---

## 4. ë³´ì•ˆ ë° ì œì•½ì‚¬í•­

### í•„ìˆ˜ ê²€ì¦
- âœ… ìº˜ë¦°ë” ì´ë¦„: ìµœì†Œ 1ì ì´ìƒ, ì¤‘ë³µ ë¶ˆê°€
- âœ… ë¹„ë°€ë²ˆí˜¸: ìµœì†Œ 4ì ì´ìƒ (í•´ì‹œ ì €ì¥)
- âœ… ë©”ì‹œì§€ ë‚ ì§œ: 2025ë…„ 12ì›”ë§Œ í—ˆìš© (1ì¼~31ì¼)

### ê¶Œí•œ ì •ì±…
- **ì½ê¸°**: ëª¨ë“  ì‚¬ìš©ì í—ˆìš© (ê³µê°œ)
- **ìƒì„±**: ëª¨ë“  ì‚¬ìš©ì í—ˆìš©
- **ìˆ˜ì •**: `messages` í•„ë“œë§Œ ìˆ˜ì • ê°€ëŠ¥ (ë³´ì•ˆ ê·œì¹™)

### ë°ì´í„° ë¬´ê²°ì„±
- `messages`ëŠ” ë‚ ì§œë³„ ë°°ì—´ë¡œ ê´€ë¦¬
- í•œ ë‚ ì§œì— ì—¬ëŸ¬ ë©”ì‹œì§€ ì €ì¥ ê°€ëŠ¥
- ì¤‘ë³µ ë©”ì‹œì§€ í—ˆìš©

---

## 5. ëª©ì—… ëª¨ë“œ ë°ì´í„°

Firebase ì—°ê²° ì‹¤íŒ¨ ì‹œ localStorage ì‚¬ìš©

### í‚¤: `mock_calendars`

```javascript
{
  "mock_1234567890_abc123": {
    id: "mock_1234567890_abc123",
    startDate: "2025-12-01",
    endDate: "2025-12-31",
    createdAt: "2025-12-15T08:00:00.000Z",
    calendarName: "í…ŒìŠ¤íŠ¸ ìº˜ë¦°ë”",
    passwordHash: "hash123",
    messages: {
      "2025-12-25": [
        {
          text: "í…ŒìŠ¤íŠ¸ ë©”ì‹œì§€",
          createdAt: "2025-12-25T10:00:00.000Z"
        }
      ]
    }
  }
}
```

---

## 6. í•µì‹¬ í•¨ìˆ˜ ëª©ë¡

### Firebase ì—°ë™
- `createCalendar(name, password)` - ìº˜ë¦°ë” ìƒì„±
- `getCalendar(calendarId)` - ìº˜ë¦°ë” ì¡°íšŒ
- `saveMessage(calendarId, date, message)` - ë©”ì‹œì§€ ì €ì¥
- `findCalendarByName(name, password)` - ì´ë¦„+ë¹„ë°€ë²ˆí˜¸ë¡œ ì°¾ê¸°
- `checkCalendarNameExists(name)` - ì´ë¦„ ì¤‘ë³µ ì²´í¬

### localStorage
- `saveCalendarLink(calendarId, title)` - ë¡œì»¬ì— ë§í¬ ì €ì¥
- `getCalendarLinks()` - ë‚´ ìº˜ë¦°ë” ëª©ë¡ ì¡°íšŒ
- `removeCalendarLink(calendarId)` - ë¡œì»¬ì—ì„œ ì‚­ì œ

### ìœ í‹¸ë¦¬í‹°
- `simpleHash(str)` - ë¹„ë°€ë²ˆí˜¸ í•´ì‹±
- `verifyPassword(input, stored)` - ë¹„ë°€ë²ˆí˜¸ ê²€ì¦

